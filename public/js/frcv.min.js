/*!
 * frcv.js v1.0.8
 * undefined
 * (c) 2021 frcv.js Lukas Danckwerth
 * Released under the MIT License
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).frcv={})}(this,(function(e){"use strict";class t{constructor(e){this.title=e.title,this.fullTitle=e.fullTitle,this.releaseDate=e.releaseDate,this.releaseYear=e.releaseYear,this.departmentNumber=e.departmentNumber,this.departmentName=e.departmentName,this.id=e.id,this.artistID=e.artistID,this.artist=e.artist,this.content=e.content,e.content?this.components=e.content.replace(/,/g," ").replace(/\./g," ").replace(/\n/g," ").replace(/\(/g," ").replace(/\)/g," ").replace(/\[/g," ").replace(/]/g," ").split(" ").filter((e=>e.length>0)):e.components&&(this.components=e.components),this.componentsLowercased=this.components.map((e=>e.toLowerCase()));let t=new Set(this.components);this.types=Array.from(t)}}class s{constructor(e){this.name=e.name,this.tracks=[];for(let s=0;s<e.tracks.length;s++){const r=e.tracks[s],a=new t(r);a.departmentNumber=e.departmentNo,a.departmentName=e.departmentName,a.artistID=e.geniusId,a.artist=e.name,this.tracks.push(a)}}}e.Album=s;class r{constructor(e){this.name=e.name,this.geniusId=e.geniusId,this.sex=e.sex,this.group=e.group,this.department=e.department||e.departement,this.departmentNo=e.departmentNo||e.departementNo,this.departmentName=(e.department||e.departement).split("(")[0].trim().toLowerCase(),this.albums=[];for(let t=0;t<e.albums.length;t++){const r=e.albums[t];r.departmentNo=this.departmentNo,r.departmentName=this.departmentName,r.artistID=e.geniusId,r.artist=e.name;const a=new s(r);a.tracks.forEach((t=>t.artistID=e.geniusId)),a.tracks.forEach((t=>t.artist=e.name)),this.albums.push(a)}this.tracks=[];for(let s=0;s<e.tracks.length;s++){const r=e.tracks[s],a=new t(r);a.departmentNumber=this.departmentNo,a.departmentName=this.departmentName,a.artistID=e.geniusId,a.artist=e.name,this.tracks.push(a)}}allTracks(){let e=[];for(let t=0;t<this.albums.length;t++){const s=this.albums[t];for(let t=0;t<s.tracks.length;t++)e.push(s.tracks[t])}for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t]);return e}allWords(){const e=this.allTracks();let t=[];for(let s=0;s<e.length;s++)t.push(...e[s].components);return t}}e.Artist=r;class a{constructor(e){this.artists=[],this.initialize(e)}initialize(e){for(let t=0;t<e.length;t++){const s=e[t],a=new r(s);this.artists.push(a)}}femaleArtists(){return this.artists.filter((e=>"F"===e.sex))}maleArtists(){return this.artists.filter((e=>"M"===e.sex))}groupArtists(){return this.artists.filter((e=>"G"===e.group))}allTracks(){let e=[];for(let t=0;t<this.artists.length;t++)e.push(...this.artists[t].allTracks());return e}allWords(){let e=[];for(let t=0;t<this.artists.length;t++){let s=this.artists[t].allWords();for(let t=0;t<s.length;t++)e.push(s[t])}return e}allAlbums(){let e=[];for(let t=0;t<this.artists.length;t++)e.push(...this.artists[t].albums);return e}allTracksWithoutAlbum(){let e=[];for(let t=0;t<this.artists.length;t++)e.push(...this.artists[t].tracks);return e}tracksForWord(e,t="case-sensitive"){let s=[];const r=this.allTracks();if("case-sensitive"===t)for(let t=0;t<r.length;t++)-1!==r[t].components.indexOf(e)&&s.push(new Track(r[t]));else if("case-insensitive"===t){e=e.toLowerCase();for(let t=0;t<r.length;t++)-1!==r[t].componentsLowercased.indexOf(e)&&s.push(new Track(r[t]))}return s}getEarliestYear(){let e=this.allTracks().find((e=>void 0!==e)).releaseYear;return this.allTracks().reduce(((e,t)=>e<t.releaseYear?e:t.releaseYear),e)}getLatestYear(){let e=this.allTracks().find((e=>void 0!==e)).releaseYear;return this.allTracks().reduce(((e,t)=>e>t.releaseYear?e:t.releaseYear),e)}getDepartementsData(){let e=[];return this.allTracks().forEach((function(t){let s=t.departmentNumber,r=t.departmentName,a=e.find((e=>e.departmentNumber===s));a?a.value+=1:e.push({departmentNumber:s,departmentName:r,value:1})})),e}getLyricsPerYear(){return this.createYearCollection((e=>1))}getWordsPerYear(){return this.createYearCollection((e=>e.components.length))}getWordsPerYearRelative(){let e=this.getWordsPerYear();return this.calculateRelativeValues(e)}getTypesPerYear(){return this.createYearCollection((e=>e.types.length))}getTypesPerYearRelative(){let e=this.getTypesPerYear();return this.calculateRelativeValues(e)}getTotalNonStandardPerYearCount(){return this.createYearCollection(0)}createYearCollection(e){let t=this.allTracks(),s={};for(let r=0;r<t.length;r++){const a=t[r],n=a.releaseYear;s[n]?s[n]=s[n]+e(a):s[n]=e(a)}return s}calculateRelativeValues(e){let t=this.getLyricsPerYear(),s={};for(const r in t)if(t.hasOwnProperty(r)){let a=t[r],n=e[r];s[r]=n/a}return s}getChartDataForTracks(e,t=1995,s=2020){let r={},a=[];for(let e=t;e<=s;e++)r[e]=0,a.push(e);for(let t=0;t<e.length;t++){const s=e[t].releaseYear;r[s]?r[s]=r[s]+1:r[s]=1}a=a.sort(),this.lyricsPerYear||(this.lyricsPerYear=this.getLyricsPerYear());let n=[];for(let e=0;e<a.length;e++){const t=a[e],s=r[t]||0,l=this.lyricsPerYear[t];n.push({year:t,value:s,yearTotal:l||0})}return n}getMapDataForTracks(e){let t={},s=[];for(let r=0;r<e.length;r++){const a=e[r].departmentNumber;s.includes(a)||s.push(a),t[a]?t[a]=t[a]+1:t[a]=1}s=s.sort();let r=[];for(let e=0;e<s.length;e++){const a=s[e],n=t[a]||0;r.push({dlabel:a,value:n})}return r}}e.Corpus=a,e.Artist=r,e.Album=s,e.Track=t,e.FRCDelegate=class{constructor(){this.name="French Rap Corpus Visualization",this.geoJSON="assets/Departements-Simple.geojson",this.dataJSON="assets/Corpus-Light.json";let e=this;this.loadData=function(t){return new Promise((function(s,r){let n=new XMLHttpRequest;n.addEventListener("progress",(function(e){if(e.lengthComputable){let s=e.loaded/e.total;t(s,null)}else{t(null,"Unable to compute progress information since the total size is unknown")}}),!1),n.addEventListener("load",(function(t){let r=t.target.responseText;e.rawJSON=r;let n=JSON.parse(r),l=new a(n);e.corpus=l,s(l)}),!1),n.open("GET",e.dataJSON),n.send()}))}.bind(this)}},Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=frcv.min.js.map
